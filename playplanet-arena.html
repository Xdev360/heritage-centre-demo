<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Enter Arena â€” PlayPlanet Arcade</title>
  <link rel="stylesheet" href="css/styles.css">
  <style>
    .section-block {
      background: white;
      border: 2px solid var(--neutral-200);
      border-radius: var(--radius-xl);
      padding: var(--space-8);
      margin-bottom: var(--space-8);
    }
    .option-card {
      border: 2px solid var(--neutral-200);
      border-radius: var(--radius-lg);
      padding: var(--space-5);
      cursor: pointer;
      transition: all 0.3s ease;
      background: white;
      position: relative;
    }
    .option-card:hover {
      border-color: var(--primary-400);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
    }
    .option-card.selected {
      border-color: var(--primary-600);
      background: var(--primary-50);
    }
    .game-card {
      border: 2px solid var(--neutral-200);
      border-radius: var(--radius-lg);
      padding: var(--space-4);
      cursor: pointer;
      transition: all 0.3s ease;
      background: white;
    }
    .game-card:hover {
      border-color: var(--primary-400);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
    }
    .cart-sidebar {
      position: sticky;
      top: 100px;
      background: white;
      border: 2px solid var(--neutral-200);
      border-radius: var(--radius-xl);
      padding: var(--space-6);
      max-height: calc(100vh - 120px);
      overflow-y: auto;
    }
    .cart-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: var(--space-3);
      background: var(--neutral-50);
      border-radius: var(--radius-md);
      margin-bottom: var(--space-3);
    }
    .category-badge {
      display: inline-block;
      padding: var(--space-1) var(--space-3);
      border-radius: var(--radius-md);
      font-size: 0.75rem;
      font-weight: 600;
      margin-right: var(--space-2);
    }
    .badge-interactive { background: var(--success-100); color: var(--success-700); }
    .badge-shooting { background: var(--error-100); color: var(--error-700); }
    .badge-horror { background: var(--neutral-800); color: white; }
    .badge-adventure { background: var(--primary-100); color: var(--primary-700); }
    .badge-sports { background: var(--warning-100); color: var(--warning-700); }
    .empty-cart {
      text-align: center;
      padding: var(--space-8) var(--space-4);
      color: var(--neutral-500);
    }
  </style>
</head>
<body data-page="arcade-arena">
  <header class="header" id="main-header">
    <div class="nav-container">
      <a href="index.html" class="nav-logo">
        <div class="nav-logo-icon">HC</div>
        <span>Heritage Centre</span>
      </a>
      <nav class="nav-main">
        <a href="index.html" class="nav-link">Home</a>
        <a href="about.html" class="nav-link">About Us</a>
        <a href="playplanet.html" class="nav-link active">Arcade</a>
      </nav>
      <div class="nav-actions">
        <a href="account.html" class="btn btn-ghost btn-sm">Sign In</a>
      </div>
    </div>
  </header>

  <main>
    <div class="container" style="padding: var(--space-6) var(--space-4);">
      <nav class="breadcrumbs">
        <a href="index.html" class="breadcrumb-item">Home</a>
        <span class="breadcrumb-separator">/</span>
        <a href="playplanet.html" class="breadcrumb-item">PlayPlanet</a>
        <span class="breadcrumb-separator">/</span>
        <span class="breadcrumb-item active">Enter Arena</span>
      </nav>
    </div>

    <div class="container" style="padding: var(--space-8) var(--space-4);">
      <div style="text-align: center; margin-bottom: var(--space-10);">
        <h1 style="font-size: 3rem; margin-bottom: var(--space-3);">ğŸ® Enter the Arena</h1>
        <p style="color: var(--neutral-600); font-size: 1.25rem;">Build your gaming experience â€¢ Add to cart â€¢ Pay once</p>
      </div>

      <div style="display: grid; grid-template-columns: 1fr 380px; gap: var(--space-8); align-items: start;">
        <!-- Main Content -->
        <div>
          
          <!-- A. Buy Play Card with Chips -->
          <div class="section-block" id="section-card">
            <div style="display: flex; align-items: center; gap: var(--space-3); margin-bottom: var(--space-6);">
              <div style="width: 64px; height: 64px; background: linear-gradient(135deg, var(--primary-500), var(--primary-600)); border-radius: var(--radius-xl); display: flex; align-items: center; justify-content: center; font-size: 2rem;">ğŸ’³</div>
              <div>
                <h2 style="font-size: 1.75rem; margin-bottom: var(--space-1);">A. Buy Play Card + Chips</h2>
                <p style="color: var(--neutral-600);">One-time card purchase with chips included</p>
              </div>
            </div>

            <div id="card-packages-container">
              <p style="text-align: center; color: var(--neutral-500); padding: var(--space-4);">Loading available cards...</p>
            </div>

            <div style="display: none;" id="original-packages">
              <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: var(--space-4);">
                <div class="option-card" data-type="card" data-amount="5000" data-chips="35">
                  <div style="text-align: center;">
                    <div style="font-size: 2rem; margin-bottom: var(--space-2);">ğŸª™</div>
                    <div style="font-size: 2rem; font-weight: 800; color: var(--primary-600); margin-bottom: var(--space-2);">35 Chips</div>
                    <div style="font-size: 1.25rem; font-weight: 700; color: var(--neutral-700); margin-bottom: var(--space-2);">â‚¦5,000</div>
                    <div style="font-size: 0.875rem; color: var(--neutral-500); margin-bottom: var(--space-3);">Card + Chips</div>
                    <button class="btn btn-primary btn-sm" style="width: 100%;" onclick="addToCart('card', 'Play Card + 35 Chips', 5000, {chips: 35})">Add to Cart</button>
                  </div>
                </div>

              <div class="option-card" data-type="card" data-amount="10000" data-chips="70">
                <div style="text-align: center;">
                  <div style="font-size: 2rem; margin-bottom: var(--space-2);">ğŸª™ğŸª™</div>
                  <div style="font-size: 2rem; font-weight: 800; color: var(--primary-600); margin-bottom: var(--space-2);">70 Chips</div>
                  <div style="font-size: 1.25rem; font-weight: 700; color: var(--neutral-700); margin-bottom: var(--space-2);">â‚¦10,000</div>
                  <div style="font-size: 0.875rem; color: var(--neutral-500); margin-bottom: var(--space-3);">Card + Chips</div>
                  <button class="btn btn-primary btn-sm" style="width: 100%;" onclick="addToCart('card', 'Play Card + 70 Chips', 10000, {chips: 70})">Add to Cart</button>
                </div>
              </div>

              <div class="option-card" data-type="card" data-amount="15000" data-chips="105">
                <div style="text-align: center;">
                  <div style="font-size: 2rem; margin-bottom: var(--space-2);">ğŸª™ğŸª™ğŸª™</div>
                  <div style="font-size: 2rem; font-weight: 800; color: var(--primary-600); margin-bottom: var(--space-2);">105 Chips</div>
                  <div style="font-size: 1.25rem; font-weight: 700; color: var(--neutral-700); margin-bottom: var(--space-2);">â‚¦15,000</div>
                  <div style="font-size: 0.875rem; color: var(--neutral-500); margin-bottom: var(--space-3);">Card + Chips</div>
                  <button class="btn btn-primary btn-sm" style="width: 100%;" onclick="addToCart('card', 'Play Card + 105 Chips', 15000, {chips: 105})">Add to Cart</button>
                </div>
              </div>

                <div class="option-card" data-type="card" data-amount="20000" data-chips="140">
                  <div style="text-align: center;">
                    <div style="font-size: 2rem; margin-bottom: var(--space-2);">ğŸª™ğŸª™ğŸª™ğŸª™</div>
                    <div style="font-size: 2rem; font-weight: 800; color: var(--primary-600); margin-bottom: var(--space-2);">140 Chips</div>
                    <div style="font-size: 1.25rem; font-weight: 700; color: var(--neutral-700); margin-bottom: var(--space-2);">â‚¦20,000</div>
                    <div style="font-size: 0.875rem; color: var(--success-600); font-weight: 600; margin-bottom: var(--space-3);">Best Value!</div>
                    <button class="btn btn-primary btn-sm" style="width: 100%;" onclick="addToCart('card', 'Play Card + 140 Chips', 20000, {chips: 140})">Add to Cart</button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- B. Book PS5 Sessions -->
          <div class="section-block" id="section-ps5">
            <div style="display: flex; align-items: center; gap: var(--space-3); margin-bottom: var(--space-6);">
              <div style="width: 64px; height: 64px; background: linear-gradient(135deg, var(--primary-500), var(--primary-600)); border-radius: var(--radius-xl); display: flex; align-items: center; justify-content: center; font-size: 2rem;">ğŸ®</div>
              <div>
                <h2 style="font-size: 1.75rem; margin-bottom: var(--space-1);">B. Book PS5 Gaming</h2>
                <p style="color: var(--neutral-600);">Next-gen PlayStation 5 experience</p>
              </div>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: var(--space-5);">
              <div class="option-card" data-type="ps5" data-players="1" data-amount="1000">
                <div style="text-align: center;">
                  <div style="font-size: 3rem; margin-bottom: var(--space-3);">ğŸ®</div>
                  <h4 style="font-size: 1.5rem; margin-bottom: var(--space-2);">Solo Session</h4>
                  <p style="color: var(--neutral-600); margin-bottom: var(--space-3);">One player gaming</p>
                  <div style="font-size: 2rem; font-weight: 800; color: var(--primary-600); margin-bottom: var(--space-4);">â‚¦1,000</div>
                  <button class="btn btn-primary btn-sm" style="width: 100%;" onclick="addToCart('ps5', 'PS5 Solo Session (1 Player)', 1000, {players: 1})">Add to Cart</button>
                </div>
              </div>

              <div class="option-card" data-type="ps5" data-players="2" data-amount="2000">
                <div style="text-align: center;">
                  <div style="font-size: 3rem; margin-bottom: var(--space-3);">ğŸ®ğŸ®</div>
                  <h4 style="font-size: 1.5rem; margin-bottom: var(--space-2);">Duo Session</h4>
                  <p style="color: var(--neutral-600); margin-bottom: var(--space-3);">Two players together</p>
                  <div style="font-size: 2rem; font-weight: 800; color: var(--primary-600); margin-bottom: var(--space-4);">â‚¦2,000</div>
                  <button class="btn btn-primary btn-sm" style="width: 100%;" onclick="addToCart('ps5', 'PS5 Duo Session (2 Players)', 2000, {players: 2})">Add to Cart</button>
                </div>
              </div>
            </div>

            <div class="card" style="margin-top: var(--space-6); background: var(--neutral-50);">
              <h4 style="margin-bottom: var(--space-4); font-size: 1rem;">ğŸ® Popular Games Available</h4>
              <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: var(--space-3);">
                <div style="padding: var(--space-2); background: white; border-radius: var(--radius-md); text-align: center; font-size: 0.875rem;">
                  <div style="font-weight: 600;">FIFA 24</div>
                  <div style="color: var(--neutral-600); font-size: 0.75rem;">Sports</div>
                </div>
                <div style="padding: var(--space-2); background: white; border-radius: var(--radius-md); text-align: center; font-size: 0.875rem;">
                  <div style="font-weight: 600;">Spider-Man</div>
                  <div style="color: var(--neutral-600); font-size: 0.75rem;">Action</div>
                </div>
                <div style="padding: var(--space-2); background: white; border-radius: var(--radius-md); text-align: center; font-size: 0.875rem;">
                  <div style="font-weight: 600;">God of War</div>
                  <div style="color: var(--neutral-600); font-size: 0.75rem;">Adventure</div>
                </div>
                <div style="padding: var(--space-2); background: white; border-radius: var(--radius-md); text-align: center; font-size: 0.875rem;">
                  <div style="font-weight: 600;">GT7</div>
                  <div style="color: var(--neutral-600); font-size: 0.75rem;">Racing</div>
                </div>
              </div>
            </div>
          </div>

          <!-- C. Book VR Gaming -->
          <div class="section-block" id="section-vr">
            <div style="display: flex; align-items: center; gap: var(--space-3); margin-bottom: var(--space-6);">
              <div style="width: 64px; height: 64px; background: linear-gradient(135deg, var(--primary-500), var(--primary-600)); border-radius: var(--radius-xl); display: flex; align-items: center; justify-content: center; font-size: 2rem;">ğŸ¥½</div>
              <div>
                <h2 style="font-size: 1.75rem; margin-bottom: var(--space-1);">C. Book VR Gaming</h2>
                <p style="color: var(--neutral-600);">â‚¦2,500 per session â€¢ Choose your game</p>
              </div>
            </div>

            <div id="vr-games-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: var(--space-4);">
              <p style="text-align: center; color: var(--neutral-500); padding: var(--space-4);">Loading VR games...</p>
            </div>

            <div style="display: none;" id="original-vr-games">
              <div class="game-card" onclick="addToCart('vr', 'VR: Beat Saber', 2500, {game: 'Beat Saber', category: 'Interactive/Rhythm', duration: 15})">
                <div style="font-size: 1.5rem; margin-bottom: var(--space-2);">ğŸµ</div>
                <h4 style="font-size: 1rem; margin-bottom: var(--space-2); font-weight: 700;">Beat Saber</h4>
                <div style="margin-bottom: var(--space-2);">
                  <span class="category-badge badge-interactive">Interactive</span>
                </div>
                <p style="color: var(--neutral-600); font-size: 0.813rem; margin-bottom: var(--space-2);">Rhythm-based lightsaber action</p>
                <div style="font-weight: 600; color: var(--primary-600); font-size: 0.875rem;">â±ï¸ ~15 min â€¢ â‚¦2,500</div>
              </div>

              <div class="game-card" onclick="addToCart('vr', 'VR: Superhot VR', 2500, {game: 'Superhot VR', category: 'Shooting/Action', duration: 20})">
                <div style="font-size: 1.5rem; margin-bottom: var(--space-2);">ğŸ”«</div>
                <h4 style="font-size: 1rem; margin-bottom: var(--space-2); font-weight: 700;">Superhot VR</h4>
                <div style="margin-bottom: var(--space-2);">
                  <span class="category-badge badge-shooting">Shooting</span>
                </div>
                <p style="color: var(--neutral-600); font-size: 0.813rem; margin-bottom: var(--space-2);">Time moves when you move</p>
                <div style="font-weight: 600; color: var(--primary-600); font-size: 0.875rem;">â±ï¸ ~20 min â€¢ â‚¦2,500</div>
              </div>

              <div class="game-card" onclick="addToCart('vr', 'VR: Walking Dead VR', 2500, {game: 'The Walking Dead: Saints & Sinners', category: 'Horror/Survival', duration: 25})">
                <div style="font-size: 1.5rem; margin-bottom: var(--space-2);">ğŸ§Ÿ</div>
                <h4 style="font-size: 1rem; margin-bottom: var(--space-2); font-weight: 700;">Walking Dead VR</h4>
                <div style="margin-bottom: var(--space-2);">
                  <span class="category-badge badge-horror">Horror</span>
                </div>
                <p style="color: var(--neutral-600); font-size: 0.813rem; margin-bottom: var(--space-2);">Zombie apocalypse survival</p>
                <div style="font-weight: 600; color: var(--primary-600); font-size: 0.875rem;">â±ï¸ ~25 min â€¢ â‚¦2,500</div>
              </div>

              <div class="game-card" onclick="addToCart('vr', 'VR: Moss', 2500, {game: 'Moss', category: 'Adventure/Puzzle', duration: 20})">
                <div style="font-size: 1.5rem; margin-bottom: var(--space-2);">ğŸ­</div>
                <h4 style="font-size: 1rem; margin-bottom: var(--space-2); font-weight: 700;">Moss</h4>
                <div style="margin-bottom: var(--space-2);">
                  <span class="category-badge badge-adventure">Adventure</span>
                </div>
                <p style="color: var(--neutral-600); font-size: 0.813rem; margin-bottom: var(--space-2);">Guide a brave mouse hero</p>
                <div style="font-weight: 600; color: var(--primary-600); font-size: 0.875rem;">â±ï¸ ~20 min â€¢ â‚¦2,500</div>
              </div>

              <div class="game-card" onclick="addToCart('vr', 'VR: Half-Life Alyx', 2500, {game: 'Half-Life: Alyx', category: 'Shooting/Adventure', duration: 30})">
                <div style="font-size: 1.5rem; margin-bottom: var(--space-2);">ğŸ‘½</div>
                <h4 style="font-size: 1rem; margin-bottom: var(--space-2); font-weight: 700;">Half-Life: Alyx</h4>
                <div style="margin-bottom: var(--space-2);">
                  <span class="category-badge badge-shooting">Shooting</span>
                  <span class="category-badge badge-adventure">Adventure</span>
                </div>
                <p style="color: var(--neutral-600); font-size: 0.813rem; margin-bottom: var(--space-2);">Epic story-driven VR</p>
                <div style="font-weight: 600; color: var(--primary-600); font-size: 0.875rem;">â±ï¸ ~30 min â€¢ â‚¦2,500</div>
              </div>

              <div class="game-card" onclick="addToCart('vr', 'VR: Job Simulator', 2500, {game: 'Job Simulator', category: 'Interactive/Comedy', duration: 15})">
                <div style="font-size: 1.5rem; margin-bottom: var(--space-2);">ğŸ¤–</div>
                <h4 style="font-size: 1rem; margin-bottom: var(--space-2); font-weight: 700;">Job Simulator</h4>
                <div style="margin-bottom: var(--space-2);">
                  <span class="category-badge badge-interactive">Interactive</span>
                </div>
                <p style="color: var(--neutral-600); font-size: 0.813rem; margin-bottom: var(--space-2);">Robot-run world jobs</p>
                <div style="font-weight: 600; color: var(--primary-600); font-size: 0.875rem;">â±ï¸ ~15 min â€¢ â‚¦2,500</div>
              </div>

              <div class="game-card" onclick="addToCart('vr', 'VR: Pavlov VR', 2500, {game: 'Pavlov VR', category: 'Shooting/Multiplayer', duration: 20})">
                <div style="font-size: 1.5rem; margin-bottom: var(--space-2);">âš”ï¸</div>
                <h4 style="font-size: 1rem; margin-bottom: var(--space-2); font-weight: 700;">Pavlov VR</h4>
                <div style="margin-bottom: var(--space-2);">
                  <span class="category-badge badge-shooting">Shooting</span>
                </div>
                <p style="color: var(--neutral-600); font-size: 0.813rem; margin-bottom: var(--space-2);">Counter-Strike VR combat</p>
                <div style="font-weight: 600; color: var(--primary-600); font-size: 0.875rem;">â±ï¸ ~20 min â€¢ â‚¦2,500</div>
              </div>

              <div class="game-card" onclick="addToCart('vr', 'VR: Table Tennis', 2500, {game: 'Eleven Table Tennis', category: 'Sports/Interactive', duration: 15})">
                <div style="font-size: 1.5rem; margin-bottom: var(--space-2);">ğŸ“</div>
                <h4 style="font-size: 1rem; margin-bottom: var(--space-2); font-weight: 700;">Table Tennis VR</h4>
                <div style="margin-bottom: var(--space-2);">
                  <span class="category-badge badge-sports">Sports</span>
                  <span class="category-badge badge-interactive">Interactive</span>
                </div>
                <p style="color: var(--neutral-600); font-size: 0.813rem; margin-bottom: var(--space-2);">Realistic ping pong simulation</p>
                <div style="font-weight: 600; color: var(--primary-600); font-size: 0.875rem;">â±ï¸ ~15 min â€¢ â‚¦2,500</div>
              </div>
            </div>
          </div>

        </div>

        <!-- Cart Sidebar -->
        <div class="cart-sidebar">
          <h3 style="font-size: 1.5rem; margin-bottom: var(--space-5); display: flex; align-items: center; gap: var(--space-2);">
            ğŸ›’ Your Cart
            <span id="cart-count" style="background: var(--primary-600); color: white; padding: 2px 8px; border-radius: var(--radius-full); font-size: 0.875rem; font-weight: 700;">0</span>
          </h3>

          <div id="cart-items">
            <div class="empty-cart">
              <div style="font-size: 3rem; margin-bottom: var(--space-3); opacity: 0.5;">ğŸ›’</div>
              <p>Your cart is empty</p>
              <p style="font-size: 0.875rem; margin-top: var(--space-2);">Add items to get started</p>
            </div>
          </div>

          <div id="cart-summary" style="display: none;">
            <div style="border-top: 2px solid var(--neutral-200); margin: var(--space-5) 0; padding-top: var(--space-5);">
              <div style="display: flex; justify-content: space-between; margin-bottom: var(--space-3);">
                <span style="font-weight: 600; color: var(--neutral-700);">Subtotal:</span>
                <span id="cart-subtotal" style="font-weight: 700; color: var(--neutral-900);">â‚¦0</span>
              </div>
              <div style="display: flex; justify-content: space-between; margin-bottom: var(--space-5);">
                <span style="font-weight: 800; font-size: 1.125rem;">Total:</span>
                <span id="cart-total" style="font-weight: 800; font-size: 1.5rem; color: var(--primary-600);">â‚¦0</span>
              </div>

              <div style="margin-bottom: var(--space-4);">
                <label style="display: block; margin-bottom: var(--space-2); font-weight: 600; font-size: 0.875rem;">Your Name *</label>
                <input type="text" id="customer-name" required style="width: 100%; padding: var(--space-3); border: 1px solid var(--neutral-300); border-radius: var(--radius-md); font-size: 0.938rem;" placeholder="Full name">
              </div>

              <div style="margin-bottom: var(--space-4);">
                <label style="display: block; margin-bottom: var(--space-2); font-weight: 600; font-size: 0.875rem;">Email Address *</label>
                <input type="email" id="customer-email" required style="width: 100%; padding: var(--space-3); border: 1px solid var(--neutral-300); border-radius: var(--radius-md); font-size: 0.938rem;" placeholder="email@example.com">
              </div>

              <div style="margin-bottom: var(--space-5);">
                <label style="display: block; margin-bottom: var(--space-2); font-weight: 600; font-size: 0.875rem;">Phone Number *</label>
                <input type="tel" id="customer-phone" required style="width: 100%; padding: var(--space-3); border: 1px solid var(--neutral-300); border-radius: var(--radius-md); font-size: 0.938rem;" placeholder="080XXXXXXXX">
              </div>

              <button id="checkout-btn" class="btn btn-primary btn-lg" style="width: 100%;" onclick="proceedToCheckout()">
                Proceed to Payment â†’
              </button>
              <button class="btn btn-ghost btn-sm" style="width: 100%; margin-top: var(--space-3);" onclick="clearCart()">
                Clear Cart
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer style="background: white; border-top: 1px solid var(--neutral-200); padding: var(--space-8) var(--space-4); margin-top: var(--space-12);">
    <div class="container" style="display:flex; justify-content:center; gap: var(--space-3); flex-wrap: wrap; align-items:center;">
      <p style="color: var(--neutral-500); font-size: 0.875rem; margin:0;">Â© 2024 Heritage Centre PlayPlanet. All rights reserved.</p>
      <span style="color: var(--neutral-300);">â€¢</span>
      <a href="admin-login.html" style="color: var(--neutral-500); text-decoration: none; font-size: 0.875rem;">Administration Login</a>
    </div>
  </footer>

  <script>
    const CARDS_KEY = 'pp_arcade_cards';
    const VR_GAMES_KEY = 'pp_vr_games';
    const PAYMENTS_KEY = 'pp_arcade_payments';
    
    let cart = [];
    let selectedCardNumber = null;

    // Initialize VR Games from admin or use defaults
    function loadVRGames() {
      let games = JSON.parse(localStorage.getItem(VR_GAMES_KEY) || '[]');
      
      // Use admin-managed games if available, otherwise use defaults
      if (games.length === 0) {
        games = [
          {id: 1, title: 'Beat Saber', category: 'Interactive', duration: 15, image: 'https://images.unsplash.com/photo-1622979135225-d2ba269cf1ac?w=400&q=80'},
          {id: 2, title: 'Superhot VR', category: 'Shooting', duration: 20, image: 'https://images.unsplash.com/photo-1542751371-adc38448a05e?w=400&q=80'},
          {id: 3, title: 'Walking Dead VR', category: 'Horror', duration: 25, image: 'https://images.unsplash.com/photo-1509198397868-475647b2a1e5?w=400&q=80'},
          {id: 4, title: 'Moss', category: 'Adventure', duration: 20, image: 'https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=400&q=80'},
          {id: 5, title: 'Half-Life: Alyx', category: 'Shooting', duration: 30, image: 'https://images.unsplash.com/photo-1538481199705-c710c4e965fc?w=400&q=80'},
          {id: 6, title: 'Job Simulator', category: 'Interactive', duration: 15, image: 'https://images.unsplash.com/photo-1511512578047-dfb367046420?w=400&q=80'},
          {id: 7, title: 'Pavlov VR', category: 'Shooting', duration: 20, image: 'https://images.unsplash.com/photo-1552820728-8b83bb6b773f?w=400&q=80'},
          {id: 8, title: 'Table Tennis VR', category: 'Interactive', duration: 15, image: 'https://images.unsplash.com/photo-1534158914592-062992fbe900?w=400&q=80'}
        ];
      }

      const grid = document.getElementById('vr-games-grid');
      let html = '';

      games.forEach(game => {
        const categoryClass = `badge-${game.category.toLowerCase()}`;
        html += `
          <div class="game-card" onclick="addToCart('vr', 'VR: ${game.title}', 2500, {game: '${game.title}', category: '${game.category}', duration: ${game.duration}})">
            <img src="${game.image}" alt="${game.title}" style="width: 100%; height: 140px; object-fit: cover; border-radius: var(--radius-md); margin-bottom: var(--space-3);">
            <h4 style="font-size: 1rem; margin-bottom: var(--space-2); font-weight: 700;">${game.title}</h4>
            <div style="margin-bottom: var(--space-2);">
              <span class="category-badge ${categoryClass}">${game.category}</span>
            </div>
            <div style="font-weight: 600; color: var(--primary-600); font-size: 0.875rem;">â±ï¸ ~${game.duration} min â€¢ â‚¦2,500</div>
          </div>
        `;
      });

      grid.innerHTML = html;
    }

    // Load card packages with card number selection
    function loadCardPackages() {
      const container = document.getElementById('card-packages-container');
      let cards = JSON.parse(localStorage.getItem(CARDS_KEY) || '[]');
      const availableCards = cards.filter(c => c.status === 'available');

      if (availableCards.length === 0) {
        container.innerHTML = `
          <div class="card" style="padding: var(--space-6); text-align: center; background: var(--warning-50); border: 2px solid var(--warning-300);">
            <div style="font-size: 2rem; margin-bottom: var(--space-3);">âš ï¸</div>
            <h4 style="margin-bottom: var(--space-2);">No Cards Available</h4>
            <p style="color: var(--neutral-600);">All PlayPlanet cards are currently sold out. Please contact staff for assistance.</p>
          </div>
        `;
        return;
      }

      let html = `
        <div style="margin-bottom: var(--space-5); padding: var(--space-4); background: var(--primary-50); border-radius: var(--radius-lg); border: 1px solid var(--primary-200);">
          <label style="display: block; margin-bottom: var(--space-3); font-weight: 600;">Select Your Card Number:</label>
          <select id="card-number-select" style="width: 100%; padding: var(--space-3); border: 2px solid var(--primary-300); border-radius: var(--radius-md); font-size: 1rem; font-weight: 600; background: white;">
            <option value="">-- Choose a Card Number --</option>
            ${availableCards.map(card => `<option value="${card.cardNumber}">PP-${card.cardNumber}</option>`).join('')}
          </select>
          <p style="margin-top: var(--space-2); font-size: 0.875rem; color: var(--neutral-600);">
            <strong>${availableCards.length}</strong> cards available
          </p>
        </div>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: var(--space-4);">
          <div class="option-card" data-type="card" data-amount="5000" data-chips="35">
            <div style="text-align: center;">
              <div style="font-size: 2rem; margin-bottom: var(--space-2);">ğŸª™</div>
              <div style="font-size: 2rem; font-weight: 800; color: var(--primary-600); margin-bottom: var(--space-2);">35 Chips</div>
              <div style="font-size: 1.25rem; font-weight: 700; color: var(--neutral-700); margin-bottom: var(--space-2);">â‚¦5,000</div>
              <div style="font-size: 0.875rem; color: var(--neutral-500); margin-bottom: var(--space-3);">Card + Chips</div>
              <button class="btn btn-primary btn-sm" style="width: 100%;" onclick="addCardToCart(5000, 35, 'Play Card + 35 Chips')">Add to Cart</button>
            </div>
          </div>

          <div class="option-card" data-type="card" data-amount="10000" data-chips="70">
            <div style="text-align: center;">
              <div style="font-size: 2rem; margin-bottom: var(--space-2);">ğŸª™ğŸª™</div>
              <div style="font-size: 2rem; font-weight: 800; color: var(--primary-600); margin-bottom: var(--space-2);">70 Chips</div>
              <div style="font-size: 1.25rem; font-weight: 700; color: var(--neutral-700); margin-bottom: var(--space-2);">â‚¦10,000</div>
              <div style="font-size: 0.875rem; color: var(--neutral-500); margin-bottom: var(--space-3);">Card + Chips</div>
              <button class="btn btn-primary btn-sm" style="width: 100%;" onclick="addCardToCart(10000, 70, 'Play Card + 70 Chips')">Add to Cart</button>
            </div>
          </div>

          <div class="option-card" data-type="card" data-amount="15000" data-chips="105">
            <div style="text-align: center;">
              <div style="font-size: 2rem; margin-bottom: var(--space-2);">ğŸª™ğŸª™ğŸª™</div>
              <div style="font-size: 2rem; font-weight: 800; color: var(--primary-600); margin-bottom: var(--space-2);">105 Chips</div>
              <div style="font-size: 1.25rem; font-weight: 700; color: var(--neutral-700); margin-bottom: var(--space-2);">â‚¦15,000</div>
              <div style="font-size: 0.875rem; color: var(--neutral-500); margin-bottom: var(--space-3);">Card + Chips</div>
              <button class="btn btn-primary btn-sm" style="width: 100%;" onclick="addCardToCart(15000, 105, 'Play Card + 105 Chips')">Add to Cart</button>
            </div>
          </div>

          <div class="option-card" data-type="card" data-amount="20000" data-chips="140">
            <div style="text-align: center;">
              <div style="font-size: 2rem; margin-bottom: var(--space-2);">ğŸª™ğŸª™ğŸª™ğŸª™</div>
              <div style="font-size: 2rem; font-weight: 800; color: var(--primary-600); margin-bottom: var(--space-2);">140 Chips</div>
              <div style="font-size: 1.25rem; font-weight: 700; color: var(--neutral-700); margin-bottom: var(--space-2);">â‚¦20,000</div>
              <div style="font-size: 0.875rem; color: var(--success-600); font-weight: 600; margin-bottom: var(--space-3);">Best Value!</div>
              <button class="btn btn-primary btn-sm" style="width: 100%;" onclick="addCardToCart(20000, 140, 'Play Card + 140 Chips')">Add to Cart</button>
            </div>
          </div>
        </div>
      `;

      container.innerHTML = html;

      // Store selected card number when changed
      document.getElementById('card-number-select').addEventListener('change', function() {
        selectedCardNumber = this.value;
      });
    }

    // Add card with card number to cart
    function addCardToCart(amount, chips, name) {
      const cardSelect = document.getElementById('card-number-select');
      if (!cardSelect || !cardSelect.value) {
        alert('Please select a card number first!');
        cardSelect?.focus();
        return;
      }

      const cardNumber = cardSelect.value;
      selectedCardNumber = cardNumber;

      // Check if card already in cart
      const existingCard = cart.find(item => item.type === 'card');
      if (existingCard) {
        alert('You can only purchase one Play Card per order. Remove the existing card first.');
        return;
      }

      addToCart('card', name + ` (PP-${cardNumber})`, amount, {chips: chips, cardNumber: cardNumber});
    }

    function addToCart(type, name, amount, details = {}) {
      const item = {
        id: Date.now() + Math.random(),
        type: type,
        name: name,
        amount: amount,
        details: details
      };
      
      cart.push(item);
      updateCart();
      
      // Visual feedback
      const btn = event.target;
      const originalText = btn.textContent;
      btn.textContent = 'âœ“ Added!';
      btn.style.background = 'var(--success-600)';
      setTimeout(() => {
        btn.textContent = originalText;
        btn.style.background = '';
      }, 1000);
    }

    function removeFromCart(itemId) {
      cart = cart.filter(item => item.id !== itemId);
      updateCart();
    }

    function updateCart() {
      const cartItemsEl = document.getElementById('cart-items');
      const cartCountEl = document.getElementById('cart-count');
      const cartSummaryEl = document.getElementById('cart-summary');
      
      cartCountEl.textContent = cart.length;
      
      if (cart.length === 0) {
        cartItemsEl.innerHTML = `
          <div class="empty-cart">
            <div style="font-size: 3rem; margin-bottom: var(--space-3); opacity: 0.5;">ğŸ›’</div>
            <p>Your cart is empty</p>
            <p style="font-size: 0.875rem; margin-top: var(--space-2);">Add items to get started</p>
          </div>
        `;
        cartSummaryEl.style.display = 'none';
        return;
      }
      
      cartSummaryEl.style.display = 'block';
      
      let html = '';
      let total = 0;
      
      cart.forEach(item => {
        total += item.amount;
        html += `
          <div class="cart-item">
            <div style="flex: 1;">
              <div style="font-weight: 600; font-size: 0.938rem; margin-bottom: var(--space-1);">${item.name}</div>
              <div style="font-size: 0.875rem; color: var(--neutral-600);">â‚¦${item.amount.toLocaleString()}</div>
            </div>
            <button class="btn btn-ghost btn-sm" onclick="removeFromCart(${item.id})" style="color: var(--error-600); padding: var(--space-1);">âœ•</button>
          </div>
        `;
      });
      
      cartItemsEl.innerHTML = html;
      document.getElementById('cart-subtotal').textContent = `â‚¦${total.toLocaleString()}`;
      document.getElementById('cart-total').textContent = `â‚¦${total.toLocaleString()}`;
    }

    function clearCart() {
      if (confirm('Are you sure you want to clear your cart?')) {
        cart = [];
        updateCart();
      }
    }

    function proceedToCheckout() {
      if (cart.length === 0) {
        alert('Your cart is empty. Please add items before proceeding.');
        return;
      }

      const name = document.getElementById('customer-name').value.trim();
      const email = document.getElementById('customer-email').value.trim();
      const phone = document.getElementById('customer-phone').value.trim();

      if (!name || !email || !phone) {
        alert('Please fill in all required fields: name, email, and phone number');
        return;
      }

      // Email validation
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        alert('Please enter a valid email address');
        return;
      }

      // Calculate total
      const total = cart.reduce((sum, item) => sum + item.amount, 0);

      // Generate booking ID
      const bookingId = 'ARC-ARENA-' + Date.now();

      // Create booking summary
      const itemsSummary = cart.map(item => item.name).join(', ');

      // Get card number if card purchase exists
      const cardItem = cart.find(item => item.type === 'card');
      const cardNumber = cardItem?.details?.cardNumber || null;
      const chips = cardItem?.details?.chips || 0;

      // Store booking details for admin
      const booking = {
        bookingId: bookingId,
        type: 'arena_order',
        service: 'PlayPlanet Arena Order',
        items: cart,
        itemsSummary: itemsSummary,
        customerName: name,
        customerEmail: email,
        customerPhone: phone,
        cardNumber: cardNumber,
        chips: chips,
        amount: total,
        timestamp: new Date().toISOString(),
        status: 'pending'
      };

      // Save to payments storage for admin review
      let payments = JSON.parse(localStorage.getItem(PAYMENTS_KEY) || '[]');
      payments.push(booking);
      localStorage.setItem(PAYMENTS_KEY, JSON.stringify(payments));

      localStorage.setItem('current_booking', JSON.stringify(booking));

      // Redirect to payment confirmation with P2P system
      window.location.href = `payment-confirmation.html?bookingId=${bookingId}&amount=${total}&service=${encodeURIComponent('PlayPlanet Arena - ' + cart.length + ' items')}&datetime=${encodeURIComponent(new Date().toLocaleString())}`;
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', () => {
      loadCardPackages();
      loadVRGames();
      updateCart();
    });
  </script>
</body>
</html>
